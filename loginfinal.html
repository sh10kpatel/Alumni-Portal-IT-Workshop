let API_BASE;
if (window.location.protocol === 'file:') {
    // Local file - use localhost
    API_BASE = 'http://127.0.0.1:4000';
} else {
    // Served from a server - use same origin (works for Railway)
    API_BASE = window.location.origin;
}
// Allow query parameter override for flexibility
try {
    const params = new URLSearchParams(window.location.search);
    const explicitBase = params.get('apiBase');
    if (explicitBase) API_BASE = explicitBase.replace(/\/$/,'');
} catch(e) {}